(()=>{"use strict";class t{constructor(t){this.arr=t,this.root=null}}function l(t){if(t.length<=1)return t;const n=Math.floor(t.length/2);return function(t,l){let n=0,o=0;const r=[];for(;n<t.length&&o<l.length;)t[n]===l[o]?(r.push(t[n]),n+=1,o+=1):t[n]<l[o]?(r.push(t[n]),n+=1):(r.push(l[o]),o+=1);for(;n<t.length;)r.push(t[n]),n+=1;for(;o<l.length;)r.push(l[o]),o+=1;return r}(l(t.slice(0,n)),l(t.slice(n)))}class n{constructor(t){this.data=t,this.left=null,this.right=null}}function o(t,l,r){if(l>r)return null;const e=Math.floor((l+r)/2),h=new n(t[e]);return h.left=o(t,l,e-1),h.right=o(t,e+1,r),h}const r=function(t){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];null!==t&&(null!==t.right&&r(t.right,`${l}${n?"│   ":"    "}`,!1),console.log(`${l}${n?"└── ":"┌── "}${t.data}`),null!==t.left&&r(t.left,`${l}${n?"    ":"│   "}`,!0))},e=(t,l)=>null===l?l=new n(t):(t<l.data?l.left=e(t,l.left):t>l.data&&(l.right=e(t,l.right)),l),h=(t,l)=>{let n=0;return null==t||t.data===l||(n+=1,n=h(t.left,l),n=h(t.right,l),n-=1),n};!function(){const n=l([1,7,4,23,8,9,4,3,5,7,9,67,6345,324]),u=new t(n),s=n.length-1;u.root=o(n,0,s),e(127,u.root),console.log(h(u.root,5)),r(u.root)}()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUcsR0FBSSxLQUFNLE1BSW5ERCxFQUFPLElBQUlKLEVBQUtvQyxHQUdoQmQsRUFBTWMsRUFBTzlCLE9BQVMsRUFFNUJGLEVBQUtBLEtBQU9nQixFQUFXZ0IsRUFIVCxFQUd3QmQsR0FDdENTLEVBQU8sSUFBSzNCLEVBQUtBLE1BR2pCeUIsUUFBUUMsSUFBSUcsRUFBTTdCLEVBQUtBLEtBQU0sSUFDN0JtQixFQUFZbkIsRUFBS0EsS0FDbkIsQ0FFQWlDLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJkZXYtdGVtcGxhdGUvLi9zcmMvdHJlZS5qcyIsIndlYnBhY2s6Ly93ZWJkZXYtdGVtcGxhdGUvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgbm8tcGFyYW0tcmVhc3NpZ24gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRyZWUge1xuICBjb25zdHJ1Y3RvcihhcnIpIHtcbiAgICB0aGlzLmFyciA9IGFycjtcbiAgICB0aGlzLnJvb3QgPSBudWxsO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtZXJnZShsZWZ0LCByaWdodCkge1xuICBsZXQgaSA9IDA7XG4gIGxldCBqID0gMDtcbiAgY29uc3QgcmVzID0gW107XG5cbiAgd2hpbGUgKGkgPCBsZWZ0Lmxlbmd0aCAmJiBqIDwgcmlnaHQubGVuZ3RoKSB7XG4gICAgaWYgKGxlZnRbaV0gPT09IHJpZ2h0W2pdKSB7XG4gICAgICByZXMucHVzaChsZWZ0W2ldKTtcbiAgICAgIGkgKz0gMTtcbiAgICAgIGogKz0gMTtcbiAgICB9IGVsc2UgaWYgKGxlZnRbaV0gPCByaWdodFtqXSkge1xuICAgICAgcmVzLnB1c2gobGVmdFtpXSk7XG4gICAgICBpICs9IDE7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlcy5wdXNoKHJpZ2h0W2pdKTtcbiAgICAgIGogKz0gMTtcbiAgICB9XG4gIH1cblxuICB3aGlsZSAoaSA8IGxlZnQubGVuZ3RoKSB7XG4gICAgcmVzLnB1c2gobGVmdFtpXSk7XG4gICAgaSArPSAxO1xuICB9XG5cbiAgd2hpbGUgKGogPCByaWdodC5sZW5ndGgpIHtcbiAgICByZXMucHVzaChyaWdodFtqXSk7XG4gICAgaiArPSAxO1xuICB9XG5cbiAgcmV0dXJuIHJlcztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNvcnQoYXJyKSB7XG4gIGlmIChhcnIubGVuZ3RoIDw9IDEpIHJldHVybiBhcnI7XG5cbiAgY29uc3QgbWlkID0gTWF0aC5mbG9vcihhcnIubGVuZ3RoIC8gMik7XG4gIGNvbnN0IGxlZnQgPSBzb3J0KGFyci5zbGljZSgwLCBtaWQpKTtcbiAgY29uc3QgcmlnaHQgPSBzb3J0KGFyci5zbGljZShtaWQpKTtcblxuICByZXR1cm4gbWVyZ2UobGVmdCwgcmlnaHQpO1xufVxuIiwiLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby1uYW1lZC1hcy1kZWZhdWx0LCBpbXBvcnQvbm8tbmFtZWQtYXMtZGVmYXVsdC1tZW1iZXIsIGltcG9ydC9leHRlbnNpb25zXG5pbXBvcnQgVHJlZSwgeyBzb3J0LCBtZXJnZSB9IGZyb20gXCIuL3RyZWUuanNcIjtcblxuY2xhc3MgTm9kZSB7XG4gIGNvbnN0cnVjdG9yKGRhdGEpIHtcbiAgICB0aGlzLmRhdGEgPSBkYXRhO1xuICAgIHRoaXMubGVmdCA9IG51bGw7XG4gICAgdGhpcy5yaWdodCA9IG51bGw7XG4gIH1cbn1cblxuZnVuY3Rpb24gYmluYXJ5VHJlZShhcnIsIHN0YXJ0LCBlbmQpIHtcbiAgaWYgKHN0YXJ0ID4gZW5kKSByZXR1cm4gbnVsbDtcblxuICBjb25zdCBtaWQgPSBNYXRoLmZsb29yKChzdGFydCArIGVuZCkgLyAyKTtcblxuICBjb25zdCByb290ID0gbmV3IE5vZGUoYXJyW21pZF0pO1xuXG4gIHJvb3QubGVmdCA9IGJpbmFyeVRyZWUoYXJyLCBzdGFydCwgbWlkIC0gMSk7XG4gIHJvb3QucmlnaHQgPSBiaW5hcnlUcmVlKGFyciwgbWlkICsgMSwgZW5kKTtcblxuICByZXR1cm4gcm9vdDtcbn1cblxuY29uc3QgcHJldHR5UHJpbnQgPSAobm9kZSwgcHJlZml4ID0gXCJcIiwgaXNMZWZ0ID0gdHJ1ZSkgPT4ge1xuICBpZiAobm9kZSA9PT0gbnVsbCkge1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAobm9kZS5yaWdodCAhPT0gbnVsbCkge1xuICAgIHByZXR0eVByaW50KG5vZGUucmlnaHQsIGAke3ByZWZpeH0ke2lzTGVmdCA/IFwi4pSCICAgXCIgOiBcIiAgICBcIn1gLCBmYWxzZSk7XG4gIH1cbiAgY29uc29sZS5sb2coYCR7cHJlZml4fSR7aXNMZWZ0ID8gXCLilJTilIDilIAgXCIgOiBcIuKUjOKUgOKUgCBcIn0ke25vZGUuZGF0YX1gKTtcbiAgaWYgKG5vZGUubGVmdCAhPT0gbnVsbCkge1xuICAgIHByZXR0eVByaW50KG5vZGUubGVmdCwgYCR7cHJlZml4fSR7aXNMZWZ0ID8gXCIgICAgXCIgOiBcIuKUgiAgIFwifWAsIHRydWUpO1xuICB9XG59O1xuXG5jb25zdCBpbnNlcnQgPSAodmFsdWUsIHJvb3QpID0+IHtcbiAgaWYgKHJvb3QgPT09IG51bGwpIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICByb290ID0gbmV3IE5vZGUodmFsdWUpO1xuICAgIHJldHVybiByb290O1xuICB9XG4gIGlmICh2YWx1ZSA8IHJvb3QuZGF0YSkge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgIHJvb3QubGVmdCA9IGluc2VydCh2YWx1ZSwgcm9vdC5sZWZ0KTtcbiAgfSBlbHNlIGlmICh2YWx1ZSA+IHJvb3QuZGF0YSkge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgIHJvb3QucmlnaHQgPSBpbnNlcnQodmFsdWUsIHJvb3QucmlnaHQpO1xuICB9XG5cbiAgcmV0dXJuIHJvb3Q7XG59O1xuXG5jb25zdCBtaW5WYWx1ZSA9IChub2RlKSA9PiB7XG4gIGxldCBtaW52ID0gbm9kZS5kYXRhO1xuICB3aGlsZSAobm9kZS5sZWZ0ICE9PSBudWxsKSB7XG4gICAgbWludiA9IG5vZGUubGVmdC5kYXRhO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgIG5vZGUgPSBub2RlLmxlZnQ7XG4gIH1cbiAgcmV0dXJuIG1pbnY7XG59O1xuXG5jb25zdCBkZWxldGVJdGVtID0gKHZhbHVlLCByb290KSA9PiB7XG4gIGlmIChyb290ID09PSBudWxsKSB7XG4gICAgcmV0dXJuIHJvb3Q7XG4gIH1cblxuICBpZiAodmFsdWUgPCByb290LmRhdGEpIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICByb290LmxlZnQgPSBkZWxldGVJdGVtKHZhbHVlLCByb290LmxlZnQpO1xuICB9IGVsc2UgaWYgKHZhbHVlID4gcm9vdC5kYXRhKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgcm9vdC5yaWdodCA9IGRlbGV0ZUl0ZW0odmFsdWUsIHJvb3QucmlnaHQpO1xuICB9IGVsc2Uge1xuICAgIGlmIChyb290LmxlZnQgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiByb290LnJpZ2h0O1xuICAgIH1cbiAgICBpZiAocm9vdC5yaWdodCA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHJvb3QubGVmdDtcbiAgICB9XG5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICByb290LmRhdGEgPSBtaW5WYWx1ZShyb290LnJpZ2h0KTtcblxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgIHJvb3QucmlnaHQgPSBkZWxldGVJdGVtKHJvb3QuZGF0YSwgcm9vdC5yaWdodCk7XG4gIH1cblxuICByZXR1cm4gcm9vdDtcbn07XG5cbmNvbnN0IGZpbmQgPSAodmFsdWUsIHJvb3QpID0+IHtcbiAgbGV0IHJlcztcbiAgaWYgKHJvb3QgPT09IG51bGwpIHtcbiAgICByZXR1cm4gXCJubyBkYXRhIGZvdW5kXCI7XG4gIH1cbiAgaWYgKHJvb3QuZGF0YSA9PT0gdmFsdWUpIHtcbiAgICByZXR1cm4gcm9vdC5kYXRhO1xuICB9XG5cbiAgaWYgKHZhbHVlIDwgcm9vdC5kYXRhKSB7XG4gICAgcmVzID0gZmluZCh2YWx1ZSwgcm9vdC5sZWZ0KTtcbiAgfSBlbHNlIGlmICh2YWx1ZSA+IHJvb3QuZGF0YSkge1xuICAgIHJlcyA9IGZpbmQodmFsdWUsIHJvb3QucmlnaHQpO1xuICB9XG5cbiAgcmV0dXJuIHJlcztcbn07XG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZWZhdWx0LXBhcmFtLWxhc3QsIGNvbnNpc3RlbnQtcmV0dXJuXG5jb25zdCBsZXZlbE9yZGVyID0gKHJvb3QsIGNhbGxiYWNrID0gbnVsbCkgPT4ge1xuICBjb25zdCByZXMgPSBbXTtcbiAgY29uc3QgcXVldWUgPSBbXTtcbiAgbGV0IHRtcCA9IHJvb3Q7XG5cbiAgd2hpbGUgKHRtcCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgaWYgKGNhbGxiYWNrID09PSBudWxsKSB7XG4gICAgICByZXMucHVzaCh0bXAuZGF0YSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNhbGxiYWNrKHRtcCk7XG4gICAgfVxuXG4gICAgaWYgKHRtcC5sZWZ0ICE9PSBudWxsKSB7XG4gICAgICBxdWV1ZS5wdXNoKHRtcC5sZWZ0KTtcbiAgICB9XG4gICAgaWYgKHRtcC5yaWdodCAhPT0gbnVsbCkge1xuICAgICAgcXVldWUucHVzaCh0bXAucmlnaHQpO1xuICAgIH1cbiAgICB0bXAgPSBxdWV1ZS5zaGlmdCgpO1xuICB9XG5cbiAgaWYgKGNhbGxiYWNrID09PSBudWxsKSB7XG4gICAgcmV0dXJuIHJlcztcbiAgfVxufTtcblxuY29uc3QgbGV2ZWxPcmRlclJlY3Vyc2l2ZSA9IChyb290LCBxdWV1ZSA9IFtdLCBjYWxsYmFjayA9IG51bGwpID0+IHtcbiAgaWYgKHJvb3QgPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuXG4gIGNhbGxiYWNrKHJvb3QpO1xuXG4gIGlmIChyb290LmxlZnQpIHtcbiAgICBxdWV1ZS5wdXNoKHJvb3QubGVmdCk7XG4gIH1cbiAgaWYgKHJvb3QucmlnaHQpIHtcbiAgICBxdWV1ZS5wdXNoKHJvb3QucmlnaHQpO1xuICB9XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gIGxldmVsT3JkZXJSZWN1cnNpdmUocXVldWUuc2hpZnQoKSwgcXVldWUsIGNhbGxiYWNrKTtcbn07XG5cbmNvbnN0IGluT3JkZXIgPSAocm9vdCwgcXVldWUgPSBbXSwgY2FsbGJhY2sgPSBudWxsKSA9PiB7XG4gIGlmIChyb290ID09PSB1bmRlZmluZWQpIHJldHVybjtcblxuICBpZiAoY2FsbGJhY2sgPT09IG51bGwpIHtcbiAgICBxdWV1ZS5wdXNoKHJvb3QuZGF0YSk7XG4gIH1cblxuICBpZiAocm9vdC5sZWZ0KSB7XG4gICAgaW5PcmRlcihyb290LmxlZnQsIHF1ZXVlLCBjYWxsYmFjayk7XG4gIH1cblxuICBpZiAoY2FsbGJhY2spIGNhbGxiYWNrKHJvb3QpO1xuXG4gIGlmIChyb290LnJpZ2h0KSB7XG4gICAgaW5PcmRlcihyb290LnJpZ2h0LCBxdWV1ZSwgY2FsbGJhY2spO1xuICB9XG5cbiAgaWYgKGNhbGxiYWNrID09PSBudWxsKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbnNpc3RlbnQtcmV0dXJuXG4gICAgcmV0dXJuIHF1ZXVlO1xuICB9XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjb25zaXN0ZW50LXJldHVyblxuICByZXR1cm4gMDtcbn07XG5cbmNvbnN0IHByZU9yZGVyID0gKHJvb3QsIHF1ZXVlID0gW10sIGNhbGxiYWNrID0gbnVsbCkgPT4ge1xuICBpZiAocm9vdCA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG5cbiAgaWYgKGNhbGxiYWNrID09PSBudWxsKSB7XG4gICAgcXVldWUucHVzaChyb290LmRhdGEpO1xuICB9XG5cbiAgaWYgKGNhbGxiYWNrKSBjYWxsYmFjayhyb290KTtcblxuICBpZiAocm9vdC5sZWZ0KSB7XG4gICAgcHJlT3JkZXIocm9vdC5sZWZ0LCBxdWV1ZSwgY2FsbGJhY2spO1xuICB9XG5cbiAgaWYgKHJvb3QucmlnaHQpIHtcbiAgICBwcmVPcmRlcihyb290LnJpZ2h0LCBxdWV1ZSwgY2FsbGJhY2spO1xuICB9XG5cbiAgaWYgKGNhbGxiYWNrID09PSBudWxsKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbnNpc3RlbnQtcmV0dXJuXG4gICAgcmV0dXJuIHF1ZXVlO1xuICB9XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjb25zaXN0ZW50LXJldHVyblxuICByZXR1cm4gMDtcbn07XG5cbmNvbnN0IHBvc3RPcmRlciA9IChyb290LCBxdWV1ZSA9IFtdLCBjYWxsYmFjayA9IG51bGwpID0+IHtcbiAgaWYgKHJvb3QgPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuXG4gIGlmIChjYWxsYmFjayA9PT0gbnVsbCkge1xuICAgIHF1ZXVlLnB1c2gocm9vdC5kYXRhKTtcbiAgfVxuXG4gIGlmIChyb290LmxlZnQpIHtcbiAgICBwb3N0T3JkZXIocm9vdC5sZWZ0LCBxdWV1ZSwgY2FsbGJhY2spO1xuICB9XG5cbiAgaWYgKHJvb3QucmlnaHQpIHtcbiAgICBwb3N0T3JkZXIocm9vdC5yaWdodCwgcXVldWUsIGNhbGxiYWNrKTtcbiAgfVxuXG4gIGlmIChjYWxsYmFjaykgY2FsbGJhY2socm9vdCk7XG5cbiAgaWYgKGNhbGxiYWNrID09PSBudWxsKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbnNpc3RlbnQtcmV0dXJuXG4gICAgcmV0dXJuIHF1ZXVlO1xuICB9XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjb25zaXN0ZW50LXJldHVyblxuICByZXR1cm4gMDtcbn07XG5cbmNvbnN0IGhlaWdodCA9IChyb290KSA9PiB7XG4gIC8vIEJhc2UgQ2FzZVxuICBpZiAocm9vdCA9PSBudWxsKSB7XG4gICAgcmV0dXJuIC0xO1xuICB9XG5cbiAgLy8gU3RvcmUgdGhlIG1heGltdW0gaGVpZ2h0IG9mXG4gIC8vIHRoZSBsZWZ0IGFuZCByaWdodCBzdWJ0cmVlXG4gIGNvbnN0IGxlZnRIZWlnaHQgPSBoZWlnaHQocm9vdC5sZWZ0KTtcblxuICBjb25zdCByaWdodEhlaWdodCA9IGhlaWdodChyb290LnJpZ2h0KTtcblxuICAvLyBVcGRhdGUgaGVpZ2h0IG9mIHRoZSBjdXJyZW50IG5vZGVcbiAgY29uc3QgYW5zID0gTWF0aC5tYXgobGVmdEhlaWdodCwgcmlnaHRIZWlnaHQpICsgMTtcblxuICByZXR1cm4gYW5zO1xufTtcblxuZnVuY3Rpb24gdGFrZUhlaWdodChyb290LCB4KSB7XG4gIGlmIChyb290ID09PSBudWxsIHx8IHJvb3QgPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuICBsZXQgbmV3SGVpZ2h0O1xuXG4gIG5ld0hlaWdodCA9IHRha2VIZWlnaHQocm9vdC5sZWZ0LCB4KTtcbiAgbmV3SGVpZ2h0ID0gdGFrZUhlaWdodChyb290LnJpZ2h0LCB4KTtcblxuICBpZiAocm9vdC5kYXRhID09PSB4KSB7XG4gICAgbmV3SGVpZ2h0ID0gaGVpZ2h0KHJvb3QpO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjb25zaXN0ZW50LXJldHVyblxuICAgIHJldHVybiBuZXdIZWlnaHQ7XG4gIH1cblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29uc2lzdGVudC1yZXR1cm5cbiAgcmV0dXJuIG5ld0hlaWdodDtcbn1cblxuY29uc3QgZGVwdGggPSAocm9vdCwgeCkgPT4ge1xuICBsZXQgbmV3RGVwdGggPSAwO1xuICBpZiAocm9vdCA9PT0gbnVsbCB8fCByb290ID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gbmV3RGVwdGg7XG4gIH1cblxuICBpZiAocm9vdC5kYXRhID09PSB4KSB7XG4gICAgcmV0dXJuIG5ld0RlcHRoO1xuICB9XG4gIG5ld0RlcHRoICs9IDE7XG5cbiAgbmV3RGVwdGggPSBkZXB0aChyb290LmxlZnQsIHgpO1xuICBuZXdEZXB0aCA9IGRlcHRoKHJvb3QucmlnaHQsIHgpO1xuXG4gIG5ld0RlcHRoIC09IDE7XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbnNpc3RlbnQtcmV0dXJuXG4gIHJldHVybiBuZXdEZXB0aDtcbn07XG5cbi8qIGZ1bmN0aW9uIHRha2VEZXB0aChyb290LCB4KSB7XG4gIGlmIChyb290ID09PSBudWxsIHx8IHJvb3QgPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuICBsZXQgbmV3RGVwdGg7XG5cbiAgbmV3RGVwdGggPSB0YWtlRGVwdGgocm9vdC5sZWZ0LCB4KTtcbiAgbmV3RGVwdGggPSB0YWtlRGVwdGgocm9vdC5yaWdodCwgeCk7XG5cbiAgaWYgKHJvb3QuZGF0YSA9PT0geCkge1xuICAgIG5ld0RlcHRoID0gRGVwdGgocm9vdCk7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbnNpc3RlbnQtcmV0dXJuXG4gICAgcmV0dXJuIG5ld0RlcHRoO1xuICB9XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbnNpc3RlbnQtcmV0dXJuXG4gIHJldHVybiBuZXdEZXB0aDtcbn0gKi9cblxuZnVuY3Rpb24gc3RhcnRJdCgpIHtcbiAgY29uc3QgYXJyID0gWzEsIDcsIDQsIDIzLCA4LCA5LCA0LCAzLCA1LCA3LCA5LCA2NywgNjM0NSwgMzI0XTsgLy8gVEhJUyBJUyBOT1QgVEhFIEFSUkFZIFRIQVQgR0VUUyBQUklOVEVEIE9VVFxuXG4gIGNvbnN0IG5ld0FyciA9IHNvcnQoYXJyKTtcblxuICBjb25zdCByb290ID0gbmV3IFRyZWUobmV3QXJyKTtcblxuICBjb25zdCBzdGFydCA9IDA7XG4gIGNvbnN0IGVuZCA9IG5ld0Fyci5sZW5ndGggLSAxO1xuXG4gIHJvb3Qucm9vdCA9IGJpbmFyeVRyZWUobmV3QXJyLCBzdGFydCwgZW5kKTtcbiAgaW5zZXJ0KDEyNywgcm9vdC5yb290KTtcblxuICBjb25zdCBxdWV1ZSA9IFtdO1xuICBjb25zb2xlLmxvZyhkZXB0aChyb290LnJvb3QsIDUpKTtcbiAgcHJldHR5UHJpbnQocm9vdC5yb290KTtcbn1cblxuc3RhcnRJdCgpO1xuIl0sIm5hbWVzIjpbIlRyZWUiLCJjb25zdHJ1Y3RvciIsImFyciIsInRoaXMiLCJyb290Iiwic29ydCIsImxlbmd0aCIsIm1pZCIsIk1hdGgiLCJmbG9vciIsImxlZnQiLCJyaWdodCIsImkiLCJqIiwicmVzIiwicHVzaCIsIm1lcmdlIiwic2xpY2UiLCJOb2RlIiwiZGF0YSIsImJpbmFyeVRyZWUiLCJzdGFydCIsImVuZCIsInByZXR0eVByaW50Iiwibm9kZSIsInByZWZpeCIsImFyZ3VtZW50cyIsInVuZGVmaW5lZCIsImlzTGVmdCIsImNvbnNvbGUiLCJsb2ciLCJpbnNlcnQiLCJ2YWx1ZSIsImRlcHRoIiwieCIsIm5ld0RlcHRoIiwibmV3QXJyIiwic3RhcnRJdCJdLCJzb3VyY2VSb290IjoiIn0=